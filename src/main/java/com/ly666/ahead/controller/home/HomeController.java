package com.ly666.ahead.controller.home;import com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;import com.baomidou.mybatisplus.extension.plugins.pagination.Page;import com.ly666.ahead.entity.NoticeInfo;import com.ly666.ahead.mapper.NoticeInfoMapper;import com.ly666.ahead.service.INoticeInfoService;import org.springframework.stereotype.Controller;import org.springframework.ui.Model;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.bind.annotation.PathVariable;import java.util.List;/** * @author ：luoyi * @date ：Created in 2019/5/31 20:47 * @desc : {} */@Controllerpublic class HomeController {	private INoticeInfoService iNoticeInfoService;	private NoticeInfoMapper noticeInfoMapper;	public HomeController(final INoticeInfoService iNoticeInfoService, final NoticeInfoMapper noticeInfoMapper) {		this.iNoticeInfoService = iNoticeInfoService;		this.noticeInfoMapper = noticeInfoMapper;	}	@GetMapping("/")	public String home(Model model){		List<NoticeInfo> list = iNoticeInfoService.list().subList(0,4);		model.addAttribute("noticInfos", list);		return "home";	}	@GetMapping("/getNoticeInfo/{id}")	public String getNoticeInfo(@PathVariable Integer id, Model model){		NoticeInfo noticeInfo = iNoticeInfoService.getOne(new QueryWrapper<NoticeInfo>().lambda().eq(NoticeInfo::getNoticeId, id));		model.addAttribute("noticeInfo",noticeInfo);		return "home/noticInfo";	}	@GetMapping("/getNoticeInfos/{currentPage}")	public String getNoticeInfos(@PathVariable Integer currentPage, Model model){		Page<NoticeInfo> page = new Page<>(currentPage,8);		List<NoticeInfo> list = noticeInfoMapper.getNoticeInfos(page);		int count = iNoticeInfoService.count();		model.addAttribute("noticeInfos",list);		model.addAttribute("totalCount",count);		model.addAttribute("totalPage",count/8+1);		return "home/noticInfos";	}}